@model StudentBrowseCoursesViewModel

@{
    Layout = "~/Views/Shared/_StudentLayout.cshtml";
    ViewBag.Title = Model.PageTitle;

    var TitleSortOptionName = CourseSortOption.Title.ToString();
    var PopularitySortOptionName = CourseSortOption.Popularity.ToString();
    var CreationDateSortOptionName = CourseSortOption.CreationDate.ToString();
    var RatingSortOptionName = CourseSortOption.Rating.ToString();
    var ReviewsSortOptionName = CourseSortOption.Reviews.ToString();

    var DescendingOrderName = SortOrder.Descending.ToString();
    var AscendingOrderName = SortOrder.Ascending.ToString();
}

<!-- Browse Content -->
<div class="explore-container">
    <aside class="filter-sidebar hidden" id="filterSidebar">
        <button class="filter-close-btn" id="closeFilter">
            <i class="fas fa-times"></i>
        </button>

        <div class="filter-header">
            <h3><i class="fas fa-sliders-h"></i> Filters</h3>
            <button class="reset-btn">Reset All</button>
        </div>
        <div class="filter-groups-container">
            <partial name="_FilterGroupsPartialView" model="@Model.Data.Settings.FilterGroups" />
        </div>
    </aside>

    <div class="filter-overlay" id="filterOverlay"></div>

    <div class="results-area">
        <div class="results-toolbar">
            <div style="display: flex; gap: 10px">
                <button class="mobile-filter-trigger"
                        id="openFilter">
                    <i class="fas fa-sliders-h"></i> Filters
                </button>

                <button class="btn btn-secondary btn-small desktop-filter-toggle"
                        id="toggleSidebar">
                    <i class="fas fa-columns"></i>
                    <span id="toggleText">Show Filters</span>
                </button>
            </div>

            <div class="toolbar-search">
                <div class="search-box-large"
                     style="padding: 0.6rem 1rem">
                    <i class="fas fa-search"></i>
                    <input type="text"
                           placeholder="Search courses..." />
                </div>
            </div>

            <div style="display: flex; gap: 1rem; align-items: center;">
                <div class="view-toggle-group">
                    <button class="view-btn active"
                            id="gridViewBtn"
                            title="Grid View">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="view-btn"
                            id="listViewBtn"
                            title="List View">
                        <i class="fas fa-list"></i>
                    </button>
                </div>

                <div class="filter-dropdown" id="sortByContainer">
                    <button class="filter-dropdown-btn" style="min-width: 180px">
                        <span id="sortByDisplay">Creation Date</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>

                    <div class="filter-dropdown-menu">
                        <button class="filter-option" data-value="@TitleSortOptionName">A-Z</button>
                        <button class="filter-option active" data-value="@CreationDateSortOptionName">Creation Date</button>
                        <button class="filter-option" data-value="@PopularitySortOptionName">Popularity</button>
                        <button class="filter-option" data-value="@RatingSortOptionName">Rating</button>
                        <button class="filter-option" data-value="@ReviewsSortOptionName">Reviews</button>
                    </div>

                    <input type="hidden" id="sortFilter" value="CreationDate" />
                </div>

                <div class="filter-dropdown" id="sortOrderContainer">
                    <button class="filter-dropdown-btn" style="min-width: 150px">
                        <span id="sortOrderDisplay">Descending</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>

                    <div class="filter-dropdown-menu">
                        <button class="filter-option" data-value="@AscendingOrderName">Ascending</button>
                        <button class="filter-option active" data-value="@DescendingOrderName">Descending</button>
                    </div>

                    <input type="hidden" id="sortOrder" value="Descending" />
                </div>
            </div>
        </div>

        <div class="results-info">
            <p class="results-count">
                Showing <strong>@Model.Data.Settings.PaginationSettings.TotalCount</strong> courses
            </p>
        </div>

        <div class="courses-catalog">
            <partial name="_StudentCoursesGridBrowsePartialView" model="@Model.Data.Items" />
        </div>

        <!-- Pagination Section -->
        <div class="pagination-container">
            <partial name="_PaginationPartialView" model="@Model.Data.Settings.PaginationSettings" />
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/pages/Home/browse-courses.css" />
    <link rel="stylesheet" href="~/css/pagination.css" />
}

@section Scripts {
    <script src="~/js/Student/browse-courses.js" asp-append-version="true"></script>
}