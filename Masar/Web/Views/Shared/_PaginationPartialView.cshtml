@model PaginationSettingsViewModel

@{
    // CONFIG: How many buttons to show on left/right of current?
    // 1 means: [1] ... [4] [5] [6] ... [10]
    int siblings = 1;
    int current = Model.CurrentPage;
    int totalPages = Model.TotalPages;
    int totalCount = Model.TotalCount;

    // Calculate the "Window" of middle buttons
    // We force it to stay within bounds (2 to Total-1)
    int startPage = Math.Max(2, current - siblings);
    int endPage = Math.Min(totalPages - 1, current + siblings);

    // Adjust window if near the start or end to keep button count consistent
    if (current <= siblings + 2)
    {
        endPage = Math.Min(totalPages - 1, 5); // Show first 5
    }
    if (current >= totalPages - (siblings + 1))
    {
        startPage = Math.Max(2, totalPages - 4); // Show last 5
    }
}



<div class="pagination-options" hidden>
    <div id="pageSize">@Model.PageSize</div>
</div>

@if (totalPages <= 1)
{
    return;
}

<button class="pagination-btn ajax-pager @(current == 1 ? "disabled" : "")"
        onclick="fetchPage(this, -1)"
        aria-label="Previous Page"
        @(current == 1 ? "disabled" : "")>
    <i class="fas fa-chevron-left"></i>
</button>

@if (totalPages > 0)
{
    <button class="pagination-btn ajax-pager @(current == 1 ? "active" : "")" onclick="fetchPage(this, 0)">1</button>
}

@if (startPage > 2)
{
    <span class="pagination-dots">...</span>
}

@for (int i = startPage; i <= endPage; i++)
{
    <button class="pagination-btn ajax-pager @(current == i ? "active" : "")" onclick="fetchPage(this, 0)">@i</button>
}

@if (endPage < totalPages - 1)
{
    <span class="pagination-dots">...</span>
}

@if (totalPages > 1)
{
    <button class="pagination-btn last-pagination-btn ajax-pager @(current == totalPages ? "active" : "")" onclick="fetchPage(this, 0)">@totalPages</button>
}

<button class="pagination-btn ajax-pager @(current == totalPages ? "disabled" : "")"
        onclick="fetchPage(this, 1)"
        aria-label="Next Page"
        @(current == totalPages ? "disabled" : "")>
    <i class="fas fa-chevron-right"></i>
</button>